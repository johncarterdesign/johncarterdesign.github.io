var sliderWrap = document.getElementById('sliderWrap'); var sliderKnobWrap = document.getElementById('sliderKnobWrap'); var sliderKnob = document.getElementById('sliderKnob'); var sliders = sliderWrap.getElementsByClassName('slider'); var sliderKnobWrapLeft = sliderKnobWrap.getBoundingClientRect().left; var sliderKnobWrapWidth = sliderKnobWrap.getBoundingClientRect().width; window.addEventListener('resize', function(e) { sliderKnobWrapLeft = sliderKnobWrap.getBoundingClientRect().left; sliderKnobWrapWidth = sliderKnobWrap.getBoundingClientRect().width; }); function moveKnob(e) { var knobPos = 0; var sliderSplit = sliderKnobWrapWidth/sliders.length; if (e.clientX <= sliderKnobWrapLeft + 12) { sliderKnob.style.right = 'auto'; sliderKnob.style.left = '0px'; knobPos=0; } else if (e.clientX>= sliderKnobWrapLeft + sliderKnobWrapWidth - 12) { sliderKnob.style.left = 'auto'; sliderKnob.style.right = '0px'; knobPos = sliderKnobWrapWidth; } else { sliderKnob.style.right = 'auto'; sliderKnob.style.left = (e.clientX - sliderKnobWrapLeft - 9) + 'px'; knobPos = e.clientX - sliderKnobWrapLeft; } for (var i = 0; i < sliders.length; i++) { if (knobPos>= sliderSplit * i && knobPos < sliderSplit * (i+1)) { sliderWrap.className = 'full pos-' + i; } } } function sliderMouseDown(e) { moveKnob(e); sliderKnobWrap.addEventListener('mousemove', moveKnob); window.addEventListener('mouseup', function(e) { sliderKnobWrap.removeEventListener('mousemove', moveKnob) }); } sliderKnobWrap.addEventListener('mousedown', sliderMouseDown);