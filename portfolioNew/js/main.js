var sliderWrap = document.getElementById('sliderWrap'); var sliderKnobWrap = document.getElementById('sliderKnobWrap'); var sliderKnob = document.getElementById('sliderKnob'); var sliderHash = document.getElementById('sliderHash'); var sliderHashLinks = sliderHash.getElementsByTagName('li'); var sliderArrowLeft = document.getElementById('sliderArrowLeft'); var sliderArrowRight = document.getElementById('sliderArrowRight'); var sliders = sliderWrap.getElementsByClassName('slider'); var sliderKnobWrapLeft; var sliderKnobWrapWidth; var activeSliders; var sliderSplit; var knobActive; function setSliderGlobals() { sliderKnobWrapLeft = sliderKnobWrap.getBoundingClientRect().left; sliderKnobWrapWidth = sliderKnobWrap.getBoundingClientRect().width; activeSliders = document.getElementsByClassName('slider active'); if (activeSliders.length == 1) { sliderKnobWrap.classList.add('inactive'); knobActive = false; sliderArrowRight.classList.add('inactive'); } else { sliderKnobWrap.classList.remove('inactive'); knobActive = true; sliderArrowRight.classList.remove('inactive'); } sliderSplit = sliderKnobWrapWidth/activeSliders.length; } setSliderGlobals(); window.addEventListener('resize', setSliderGlobals); function moveKnob(e) { var knobPos = 0; if (e.clientX <= sliderKnobWrapLeft + 12) { sliderKnob.style.right = 'auto'; sliderKnob.style.left = '0px'; knobPos=0; } else if (e.clientX>= sliderKnobWrapLeft + sliderKnobWrapWidth - 12) { sliderKnob.style.left = 'auto'; sliderKnob.style.right = '0px'; knobPos = sliderKnobWrapWidth; } else { sliderKnob.style.right = 'auto'; sliderKnob.style.left = (e.clientX - sliderKnobWrapLeft - 9) + 'px'; knobPos = e.clientX - sliderKnobWrapLeft; } for (var i = 0; i < activeSliders.length; i++) { if (knobPos>= sliderSplit * i && knobPos < sliderSplit * (i+1)) { sliderWrap.className = 'full pos-' + i; } } } function sliderMouseDown(e) { if (knobActive) { moveKnob(e); sliderKnobWrap.addEventListener('mousemove', moveKnob); window.addEventListener('mouseup', function(e) { sliderKnobWrap.removeEventListener('mousemove', moveKnob) }); } } function clickArrow() { if (!this.classList.contains('inactive')) { var direction = this.id == 'sliderArrowLeft' ? (-1) : 1; var currentSlide = parseInt(sliderWrap.className.split('-')[1]); var newSlide = currentSlide + direction; sliderWrap.className = 'full pos-' + newSlide.toString(); if (newSlide == 0) { sliderArrowLeft.classList.add('inactive'); } else { sliderArrowLeft.classList.remove('inactive'); } if (newSlide == activeSliders.length - 1) { sliderArrowRight.classList.add('inactive'); } else { sliderArrowRight.classList.remove('inactive'); } } } sliderKnobWrap.addEventListener('mousedown', sliderMouseDown); sliderArrowLeft.addEventListener('click', clickArrow); sliderArrowRight.addEventListener('click', clickArrow); for (var i = 0; i < sliderHashLinks.length; i++) { sliderHashLinks[i].addEventListener('click', function() { var oldTarget = document.getElementsByClassName('sliderHash active')[0]; var target = this.getAttribute('data-target'); for (var i = 0; i < sliders.length; i++) { if (sliders[i].getAttribute('data-type') == target) { sliders[i].classList.add('active') } else { sliders[i].classList.remove('active') } } oldTarget.classList.remove('active'); this.classList.add('active'); sliderWrap.className = 'full pos-0'; sliderKnob.style.right = 'auto'; sliderKnob.style.left = '0px'; sliderArrowLeft.classList.add('inactive'); setSliderGlobals() }); }